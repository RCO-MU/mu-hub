{"ast":null,"code":"var _jsxFileName = \"/Users/rco/Downloads/Repositories/mu-hub-1/client/src/components/AccountUpdate/AccountUpdate.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-console */\nimport * as React from 'react';\nimport axios from 'axios';\nimport './AccountUpdate.css';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Loader from '../Loader/Loader';\nimport refreshPage from '../../utils/refreshPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function AccountUpdate(_ref) {\n  _s();\n\n  let {\n    userInfo,\n    loading,\n    setLoading,\n    setCookie\n  } = _ref;\n  // **********************************************************************\n  // CONSTANTS/VARIABLES\n  // **********************************************************************\n  const navigate = useNavigate(); // **********************************************************************\n  // STATE VARIABLES AND FUNCTIONS\n  // **********************************************************************\n\n  const [bio, setBio] = useState('');\n  const [isChanged, setIsChanged] = useState(false); // **********************************************************************\n  // AXIOS FUNCTIONS (PUT)\n  // **********************************************************************\n\n  /*\n    Puts data through backend /api/intern endpoint using axios.\n    loading is true while this function runs and false otherwise.\n      (loading -> false is handled by page navigation in client function)\n    Updates intern info (bio) in database.\n    If an error occurs, the error is logged.\n  */\n\n  async function putInternUpdate() {\n    setLoading(true);\n\n    try {\n      const url = 'api/intern' + `?unixname=${userInfo.unixname}` + `&bio=${bio}`;\n      await axios.put(url);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n  /*\n    Deletes user account through api/user endpoint using axios.\n    loading is true while this function runs and false otherwise.\n      (loading -> false is handled by page navigation in client function)\n    Deletes all user account information from database.\n    If an error occurs, the error is logged.\n  */\n\n\n  async function deleteAccount() {\n    setLoading(true);\n\n    try {\n      const url = 'api/user' + `?unixname=${userInfo.unixname}`;\n      await axios.delete(url);\n    } catch (err) {\n      console.error(err);\n    }\n  } // **********************************************************************\n  // HANDLER FUNCTIONS\n  // **********************************************************************\n\n\n  const handleOnInternUpdateSubmit = async () => {\n    await putInternUpdate();\n    refreshPage();\n  };\n\n  const handleDeleteAccount = async () => {\n    await deleteAccount();\n    setCookie('data', {\n      loggedIn: false,\n      user: undefined\n    });\n    navigate('/');\n    refreshPage();\n  }; // **********************************************************************\n  // PAGE RENDERING\n  // **********************************************************************\n  // loading\n\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 12\n    }, this);\n  } // If user is an intern, allow bio editing. Else, no account edits can be made\n  // Only display update button if bio has changed.\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"AccountUpdate\",\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"name-update\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: `${userInfo.user.name} (${userInfo.unixname})`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), userInfo.user.role === 'intern' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"update-info\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            children: `• ${userInfo.intern.division} (${userInfo.intern.startDate} Start)`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"update-info\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            children: `• Lives in ${userInfo.intern.residence}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"update-info\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            children: `• Goes to ${userInfo.intern.college}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"update-info\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Bio:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"bio\",\n          className: \"input-field update text\",\n          placeholder: \"Tell us about yourself!\",\n          name: \"bio\",\n          defaultValue: userInfo.intern.bio,\n          onChange: e => {\n            setBio(e.target.value);\n            setIsChanged(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this), isChanged ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"action-button\",\n            type: \"submit\",\n            value: \"Update\",\n            onClick: handleOnInternUpdateSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : null]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Admins cannot edit their account information.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"action-button\",\n      type: \"button\",\n      onClick: () => navigate('/'),\n      children: \"Return Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"action-button delete\",\n      type: \"button\",\n      onClick: handleDeleteAccount,\n      children: \"Delete Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AccountUpdate, \"9Cpuyh7N9WsavfAh/uPMKyvREGs=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AccountUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountUpdate\");","map":{"version":3,"names":["React","axios","useState","useNavigate","Loader","refreshPage","AccountUpdate","userInfo","loading","setLoading","setCookie","navigate","bio","setBio","isChanged","setIsChanged","putInternUpdate","url","unixname","put","err","console","error","deleteAccount","delete","handleOnInternUpdateSubmit","handleDeleteAccount","loggedIn","user","undefined","name","role","intern","division","startDate","residence","college","e","target","value"],"sources":["/Users/rco/Downloads/Repositories/mu-hub-1/client/src/components/AccountUpdate/AccountUpdate.jsx"],"sourcesContent":["/* eslint-disable no-console */\nimport * as React from 'react';\nimport axios from 'axios';\nimport './AccountUpdate.css';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Loader from '../Loader/Loader';\nimport refreshPage from '../../utils/refreshPage';\n\nexport default function AccountUpdate({\n  userInfo, loading, setLoading, setCookie,\n}) {\n  // **********************************************************************\n  // CONSTANTS/VARIABLES\n  // **********************************************************************\n\n  const navigate = useNavigate();\n\n  // **********************************************************************\n  // STATE VARIABLES AND FUNCTIONS\n  // **********************************************************************\n\n  const [bio, setBio] = useState('');\n  const [isChanged, setIsChanged] = useState(false);\n\n  // **********************************************************************\n  // AXIOS FUNCTIONS (PUT)\n  // **********************************************************************\n\n  /*\n    Puts data through backend /api/intern endpoint using axios.\n    loading is true while this function runs and false otherwise.\n      (loading -> false is handled by page navigation in client function)\n    Updates intern info (bio) in database.\n    If an error occurs, the error is logged.\n  */\n  async function putInternUpdate() {\n    setLoading(true);\n    try {\n      const url = 'api/intern'\n      + `?unixname=${userInfo.unixname}`\n      + `&bio=${bio}`;\n      await axios.put(url);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  /*\n    Deletes user account through api/user endpoint using axios.\n    loading is true while this function runs and false otherwise.\n      (loading -> false is handled by page navigation in client function)\n    Deletes all user account information from database.\n    If an error occurs, the error is logged.\n  */\n  async function deleteAccount() {\n    setLoading(true);\n    try {\n      const url = 'api/user'\n        + `?unixname=${userInfo.unixname}`;\n      await axios.delete(url);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  // **********************************************************************\n  // HANDLER FUNCTIONS\n  // **********************************************************************\n\n  const handleOnInternUpdateSubmit = async () => {\n    await putInternUpdate();\n    refreshPage();\n  };\n\n  const handleDeleteAccount = async () => {\n    await deleteAccount();\n    setCookie('data', {\n      loggedIn: false,\n      user: undefined,\n    });\n    navigate('/');\n    refreshPage();\n  };\n\n  // **********************************************************************\n  // PAGE RENDERING\n  // **********************************************************************\n\n  // loading\n  if (loading) {\n    return <Loader />;\n  }\n  // If user is an intern, allow bio editing. Else, no account edits can be made\n  // Only display update button if bio has changed.\n  return (\n    <div className=\"AccountUpdate\">\n      <br />\n      <div className=\"user-card\">\n        <p id=\"name-update\"><b>{`${userInfo.user.name} (${userInfo.unixname})`}</b></p>\n        {userInfo.user.role === 'intern' ? (\n          <>\n            <p className=\"update-info\"><i>{`• ${userInfo.intern.division} (${userInfo.intern.startDate} Start)`}</i></p>\n            <p className=\"update-info\"><i>{`• Lives in ${userInfo.intern.residence}`}</i></p>\n            <p className=\"update-info\"><i>{`• Goes to ${userInfo.intern.college}`}</i></p>\n            <br />\n            <p className=\"update-info\"><b>Bio:</b></p>\n            <textarea\n              id=\"bio\"\n              className=\"input-field update text\"\n              placeholder=\"Tell us about yourself!\"\n              name=\"bio\"\n              defaultValue={userInfo.intern.bio}\n              onChange={(e) => { setBio(e.target.value); setIsChanged(true); }}\n            />\n            <br />\n            {isChanged ? (\n              <>\n                <input\n                  className=\"action-button\"\n                  type=\"submit\"\n                  value=\"Update\"\n                  onClick={handleOnInternUpdateSubmit}\n                />\n                <br />\n              </>\n            ) : null}\n          </>\n        ) : (<h2>Admins cannot edit their account information.</h2>)}\n      </div>\n      <button\n        className=\"action-button\"\n        type=\"button\"\n        onClick={() => navigate('/')}\n      >\n        Return Home\n      </button>\n      <br />\n      <button\n        className=\"action-button delete\"\n        type=\"button\"\n        onClick={handleDeleteAccount}\n      >\n        Delete Account\n      </button>\n    </div>\n  );\n}\n"],"mappings":";;;AAAA;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,qBAAP;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;;;AAEA,eAAe,SAASC,aAAT,OAEZ;EAAA;;EAAA,IAFmC;IACpCC,QADoC;IAC1BC,OAD0B;IACjBC,UADiB;IACLC;EADK,CAEnC;EACD;EACA;EACA;EAEA,MAAMC,QAAQ,GAAGR,WAAW,EAA5B,CALC,CAOD;EACA;EACA;;EAEA,MAAM,CAACS,GAAD,EAAMC,MAAN,IAAgBX,QAAQ,CAAC,EAAD,CAA9B;EACA,MAAM,CAACY,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,KAAD,CAA1C,CAZC,CAcD;EACA;EACA;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;;EACE,eAAec,eAAf,GAAiC;IAC/BP,UAAU,CAAC,IAAD,CAAV;;IACA,IAAI;MACF,MAAMQ,GAAG,GAAG,eACT,aAAYV,QAAQ,CAACW,QAAS,EADrB,GAET,QAAON,GAAI,EAFd;MAGA,MAAMX,KAAK,CAACkB,GAAN,CAAUF,GAAV,CAAN;IACD,CALD,CAKE,OAAOG,GAAP,EAAY;MACZC,OAAO,CAACC,KAAR,CAAcF,GAAd;IACD;EACF;EAED;AACF;AACA;AACA;AACA;AACA;AACA;;;EACE,eAAeG,aAAf,GAA+B;IAC7Bd,UAAU,CAAC,IAAD,CAAV;;IACA,IAAI;MACF,MAAMQ,GAAG,GAAG,aACP,aAAYV,QAAQ,CAACW,QAAS,EADnC;MAEA,MAAMjB,KAAK,CAACuB,MAAN,CAAaP,GAAb,CAAN;IACD,CAJD,CAIE,OAAOG,GAAP,EAAY;MACZC,OAAO,CAACC,KAAR,CAAcF,GAAd;IACD;EACF,CArDA,CAuDD;EACA;EACA;;;EAEA,MAAMK,0BAA0B,GAAG,YAAY;IAC7C,MAAMT,eAAe,EAArB;IACAX,WAAW;EACZ,CAHD;;EAKA,MAAMqB,mBAAmB,GAAG,YAAY;IACtC,MAAMH,aAAa,EAAnB;IACAb,SAAS,CAAC,MAAD,EAAS;MAChBiB,QAAQ,EAAE,KADM;MAEhBC,IAAI,EAAEC;IAFU,CAAT,CAAT;IAIAlB,QAAQ,CAAC,GAAD,CAAR;IACAN,WAAW;EACZ,CARD,CAhEC,CA0ED;EACA;EACA;EAEA;;;EACA,IAAIG,OAAJ,EAAa;IACX,oBAAO,QAAC,MAAD;MAAA;MAAA;MAAA;IAAA,QAAP;EACD,CAjFA,CAkFD;EACA;;;EACA,oBACE;IAAK,SAAS,EAAC,eAAf;IAAA,wBACE;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAK,SAAS,EAAC,WAAf;MAAA,wBACE;QAAG,EAAE,EAAC,aAAN;QAAA,uBAAoB;UAAA,UAAK,GAAED,QAAQ,CAACqB,IAAT,CAAcE,IAAK,KAAIvB,QAAQ,CAACW,QAAS;QAAhD;UAAA;UAAA;UAAA;QAAA;MAApB;QAAA;QAAA;QAAA;MAAA,QADF,EAEGX,QAAQ,CAACqB,IAAT,CAAcG,IAAd,KAAuB,QAAvB,gBACC;QAAA,wBACE;UAAG,SAAS,EAAC,aAAb;UAAA,uBAA2B;YAAA,UAAK,KAAIxB,QAAQ,CAACyB,MAAT,CAAgBC,QAAS,KAAI1B,QAAQ,CAACyB,MAAT,CAAgBE,SAAU;UAAhE;YAAA;YAAA;YAAA;UAAA;QAA3B;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAG,SAAS,EAAC,aAAb;UAAA,uBAA2B;YAAA,UAAK,cAAa3B,QAAQ,CAACyB,MAAT,CAAgBG,SAAU;UAA5C;YAAA;YAAA;YAAA;UAAA;QAA3B;UAAA;UAAA;UAAA;QAAA,QAFF,eAGE;UAAG,SAAS,EAAC,aAAb;UAAA,uBAA2B;YAAA,UAAK,aAAY5B,QAAQ,CAACyB,MAAT,CAAgBI,OAAQ;UAAzC;YAAA;YAAA;YAAA;UAAA;QAA3B;UAAA;UAAA;UAAA;QAAA,QAHF,eAIE;UAAA;UAAA;UAAA;QAAA,QAJF,eAKE;UAAG,SAAS,EAAC,aAAb;UAAA,uBAA2B;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAA3B;UAAA;UAAA;UAAA;QAAA,QALF,eAME;UACE,EAAE,EAAC,KADL;UAEE,SAAS,EAAC,yBAFZ;UAGE,WAAW,EAAC,yBAHd;UAIE,IAAI,EAAC,KAJP;UAKE,YAAY,EAAE7B,QAAQ,CAACyB,MAAT,CAAgBpB,GALhC;UAME,QAAQ,EAAGyB,CAAD,IAAO;YAAExB,MAAM,CAACwB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAN;YAAwBxB,YAAY,CAAC,IAAD,CAAZ;UAAqB;QANlE;UAAA;UAAA;UAAA;QAAA,QANF,eAcE;UAAA;UAAA;UAAA;QAAA,QAdF,EAeGD,SAAS,gBACR;UAAA,wBACE;YACE,SAAS,EAAC,eADZ;YAEE,IAAI,EAAC,QAFP;YAGE,KAAK,EAAC,QAHR;YAIE,OAAO,EAAEW;UAJX;YAAA;YAAA;YAAA;UAAA,QADF,eAOE;YAAA;YAAA;YAAA;UAAA,QAPF;QAAA,gBADQ,GAUN,IAzBN;MAAA,gBADD,gBA4BI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QA9BP;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,eAkCE;MACE,SAAS,EAAC,eADZ;MAEE,IAAI,EAAC,QAFP;MAGE,OAAO,EAAE,MAAMd,QAAQ,CAAC,GAAD,CAHzB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAlCF,eAyCE;MAAA;MAAA;MAAA;IAAA,QAzCF,eA0CE;MACE,SAAS,EAAC,sBADZ;MAEE,IAAI,EAAC,QAFP;MAGE,OAAO,EAAEe,mBAHX;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QA1CF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAoDD;;GA1IuBpB,a;UAOLH,W;;;KAPKG,a"},"metadata":{},"sourceType":"module"}