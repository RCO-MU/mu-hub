{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rco/Downloads/Repositories/mu-hub-1/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rco/Downloads/Repositories/mu-hub-1/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rco/Downloads/Repositories/mu-hub-1/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as React from'react';import axios from'axios';import'./AccountCreate.css';import{useState}from'react';import Loader from'../Loader/Loader';import delay from'../../utils/delay';import refreshPage from'../../utils/refreshPage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AccountCreate(_ref){var loading=_ref.loading,setLoading=_ref.setLoading,setCookie=_ref.setCookie;// **********************************************************************\n// STATE VARIABLES AND FUNCTIONS\n// **********************************************************************\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),unixname=_useState2[0],setUnixname=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setIsAdmin=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];// **********************************************************************\n// AXIOS FUNCTIONS (POST)\n// **********************************************************************\n/*\n    Posts data to backend /api/user endpoint using axios.\n    loading is true while this function runs and false otherwise.\n      (loading -> false is handled by page refresh in client function)\n    Adds user account with unixname, full name, and role (intern/admin) to database.\n    Sets cookie information to loggedIn: true, user: unixname.\n    If an error occurs, the error is logged.\n  */function postNewAccount(){return _postNewAccount.apply(this,arguments);}// **********************************************************************\n// HANDLER FUNCTIONS\n// **********************************************************************\nfunction _postNewAccount(){_postNewAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.prev=1;url='api/user'+\"?unixname=\".concat(unixname)+\"&name=\".concat(name)+\"&role=\".concat(isAdmin?'admin':'intern');_context2.next=5;return axios.post(url);case 5:setCookie('data',{loggedIn:true,user:unixname});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.error(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return _postNewAccount.apply(this,arguments);}var handleOnAccountSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(unixname==='')){_context.next=4;break;}setError('Please enter your unixname.');_context.next=14;break;case 4:if(!(name==='')){_context.next=8;break;}setError('Please enter your name.');_context.next=14;break;case 8:setError('');_context.next=11;return postNewAccount();case 11:_context.next=13;return delay(3000);case 13:// artificial delay for occasional database latency\nrefreshPage();case 14:case\"end\":return _context.stop();}}},_callee);}));return function handleOnAccountSubmit(){return _ref2.apply(this,arguments);};}();// **********************************************************************\n// PAGE RENDERING\n// **********************************************************************\n// loading\nif(loading){return/*#__PURE__*/_jsx(Loader,{});}// else if not loading\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"AccountCreate\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Account Info\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"This is a temporary page. All of this information will eventually be retrieved via SSO integration.\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"unixname\",children:['Unixname: ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"unixname\",className:\"input-field text ac\",name:\"unixname\",onChange:function onChange(e){return setUnixname(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"Name\",children:['Name: ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",className:\"input-field text ac\",name:\"name\",onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"is-admin\",children:['Are you an admin? ',/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"is-admin\",className:\"input-field checkbox ac\",name:\"is-admin\",onChange:function onChange(){return setIsAdmin(!isAdmin);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"action-button ac\",type:\"submit\",value:\"Continue\",onClick:handleOnAccountSubmit}),/*#__PURE__*/_jsx(\"h3\",{children:error})]});}","map":{"version":3,"names":["React","axios","useState","Loader","delay","refreshPage","AccountCreate","loading","setLoading","setCookie","unixname","setUnixname","name","setName","isAdmin","setIsAdmin","error","setError","postNewAccount","url","post","loggedIn","user","console","handleOnAccountSubmit","e","target","value"],"sources":["/Users/rco/Downloads/Repositories/mu-hub-1/client/src/components/AccountCreate/AccountCreate.jsx"],"sourcesContent":["import * as React from 'react';\nimport axios from 'axios';\nimport './AccountCreate.css';\nimport { useState } from 'react';\nimport Loader from '../Loader/Loader';\nimport delay from '../../utils/delay';\nimport refreshPage from '../../utils/refreshPage';\n\nexport default function AccountCreate({\n  loading, setLoading, setCookie,\n}) {\n  // **********************************************************************\n  // STATE VARIABLES AND FUNCTIONS\n  // **********************************************************************\n\n  const [unixname, setUnixname] = useState('');\n  const [name, setName] = useState('');\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [error, setError] = useState('');\n\n  // **********************************************************************\n  // AXIOS FUNCTIONS (POST)\n  // **********************************************************************\n\n  /*\n    Posts data to backend /api/user endpoint using axios.\n    loading is true while this function runs and false otherwise.\n      (loading -> false is handled by page refresh in client function)\n    Adds user account with unixname, full name, and role (intern/admin) to database.\n    Sets cookie information to loggedIn: true, user: unixname.\n    If an error occurs, the error is logged.\n  */\n  async function postNewAccount() {\n    setLoading(true);\n    try {\n      const url = 'api/user'\n      + `?unixname=${unixname}`\n      + `&name=${name}`\n      + `&role=${isAdmin ? 'admin' : 'intern'}`;\n      await axios.post(url);\n      setCookie('data', {\n        loggedIn: true,\n        user: unixname,\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  // **********************************************************************\n  // HANDLER FUNCTIONS\n  // **********************************************************************\n\n  const handleOnAccountSubmit = async () => {\n    if (unixname === '') {\n      setError('Please enter your unixname.');\n    } else if (name === '') {\n      setError('Please enter your name.');\n    } else {\n      setError('');\n      await postNewAccount();\n      await delay(3000); // artificial delay for occasional database latency\n      refreshPage();\n    }\n  };\n\n  // **********************************************************************\n  // PAGE RENDERING\n  // **********************************************************************\n\n  // loading\n  if (loading) {\n    return <Loader />;\n  }\n  // else if not loading\n  return (\n    <div className=\"AccountCreate\">\n      <h1>Account Info</h1>\n      <h2>\n        This is a temporary page.\n        All of this information will eventually be retrieved via SSO integration.\n      </h2>\n      <label htmlFor=\"unixname\">\n        {'Unixname: '}\n        <br />\n        <input\n          type=\"text\"\n          id=\"unixname\"\n          className=\"input-field text ac\"\n          name=\"unixname\"\n          onChange={(e) => setUnixname(e.target.value)}\n        />\n      </label>\n      <br />\n      <label htmlFor=\"Name\">\n        {'Name: '}\n        <br />\n        <input\n          type=\"text\"\n          id=\"name\"\n          className=\"input-field text ac\"\n          name=\"name\"\n          onChange={(e) => setName(e.target.value)}\n        />\n      </label>\n      <br />\n      <label htmlFor=\"is-admin\">\n        {'Are you an admin? '}\n        <input\n          type=\"checkbox\"\n          id=\"is-admin\"\n          className=\"input-field checkbox ac\"\n          name=\"is-admin\"\n          onChange={() => setIsAdmin(!isAdmin)}\n        />\n      </label>\n      <br />\n      <input\n        className=\"action-button ac\"\n        type=\"submit\"\n        value=\"Continue\"\n        onClick={handleOnAccountSubmit}\n      />\n      <h3>{error}</h3>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}