{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rco/Downloads/Repositories/mu-hub-1/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rco/Downloads/Repositories/mu-hub-1/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rco/Downloads/Repositories/mu-hub-1/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as React from'react';import axios from'axios';import'./InternCreate.css';import{useState}from'react';import Select,{createFilter}from'react-select';import Loader from'../Loader/Loader';import delay from'../../utils/delay';import refreshPage from'../../utils/refreshPage';import colleges from'../../data/colleges.json';import startDates from'../../data/startDates.json';import divisions from'../../data/divisions.json';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function InternCreate(_ref){var userInfo=_ref.userInfo,loading=_ref.loading,setLoading=_ref.setLoading;// **********************************************************************\n// CONSTANTS\n// **********************************************************************\nvar collegeOptions=colleges.map(function(college){return{value:college,label:college};});var startDateOptions=startDates.map(function(date){return{value:date,label:date};});var divisionOptions=divisions.map(function(division){return{value:division,label:division};});// **********************************************************************\n// STATE VARIABLES AND FUNCTIONS\n// **********************************************************************\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),startDate=_useState2[0],setStartDate=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),division=_useState4[0],setDivision=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),residence=_useState6[0],setResidence=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),college=_useState8[0],setCollege=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),bio=_useState10[0],setBio=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];// **********************************************************************\n// AXIOS FUNCTIONS (POST)\n// **********************************************************************\n/*\n    Posts data to backend /api/intern endpoint using axios.\n    loading is true while this function runs and false otherwise.\n      (loading -> false is handled by page refresh in client function)\n    Adds intern info (unixname, start date, division, residence, college, bio) to database.\n    If an error occurs, the error is logged.\n  */function postNewIntern(){return _postNewIntern.apply(this,arguments);}// **********************************************************************\n// HANDLER FUNCTIONS\n// **********************************************************************\nfunction _postNewIntern(){_postNewIntern=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.prev=1;url='api/intern'+\"?unixname=\".concat(userInfo.unixname)+\"&startDate=\".concat(startDate)+\"&division=\".concat(division)+\"&residence=\".concat(residence)+\"&college=\".concat(college)+\"&bio=\".concat(bio);_context2.next=5;return axios.post(url);case 5:_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);console.error(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return _postNewIntern.apply(this,arguments);}var handleOnInternInfoSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(startDate==='')){_context.next=4;break;}setError('Please enter your start date.');_context.next=18;break;case 4:if(!(division==='')){_context.next=8;break;}setError('Please select your MetaU division.');_context.next=18;break;case 8:if(!(college==='')){_context.next=12;break;}setError('Please select your college.');_context.next=18;break;case 12:setError('');_context.next=15;return postNewIntern();case 15:_context.next=17;return delay(3000);case 17:// artificial delay for occasional database latency\nrefreshPage();case 18:case\"end\":return _context.stop();}}},_callee);}));return function handleOnInternInfoSubmit(){return _ref2.apply(this,arguments);};}();// **********************************************************************\n// PAGE RENDERING\n// **********************************************************************\n// loading\nif(loading){return/*#__PURE__*/_jsx(Loader,{});}// else if not loading, return intern account creation form\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"InternCreate\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create your intern account!\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"startDate\",children:['Start Date: ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Select,{name:\"startDate\",className:\"input-field dropdown ic\",options:startDateOptions,filterOption:createFilter({ignoreAccents:false}),onChange:function onChange(e){return setStartDate(e.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"division\",children:['Division: ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Select,{name:\"division\",className:\"input-field dropdown ic\",options:divisionOptions,filterOption:createFilter({ignoreAccents:false}),onChange:function onChange(e){return setDivision(e.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"residence\",children:['Residence: ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"residence\",className:\"input-field text ic\",name:\"residence\",onChange:function onChange(e){return setResidence(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"college\",children:['College: ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Select,{name:\"colleges\",className:\"input-field dropdown ic\",options:collegeOptions,filterOption:createFilter({ignoreAccents:false}),onChange:function onChange(e){return setCollege(e.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"bio\",children:['Bio: ',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{id:\"bio\",className:\"input-field text ic\",placeholder:\"Tell us about yourself! (You may edit this later.)\",name:\"bio\",onChange:function onChange(e){return setBio(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"action-button ic\",type:\"submit\",value:\"Submit\",onClick:handleOnInternInfoSubmit}),/*#__PURE__*/_jsx(\"h3\",{children:error})]});}","map":{"version":3,"names":["React","axios","useState","Select","createFilter","Loader","delay","refreshPage","colleges","startDates","divisions","InternCreate","userInfo","loading","setLoading","collegeOptions","map","college","value","label","startDateOptions","date","divisionOptions","division","startDate","setStartDate","setDivision","residence","setResidence","setCollege","bio","setBio","error","setError","postNewIntern","url","unixname","post","console","handleOnInternInfoSubmit","ignoreAccents","e","target"],"sources":["/Users/rco/Downloads/Repositories/mu-hub-1/client/src/components/InternCreate/InternCreate.jsx"],"sourcesContent":["import * as React from 'react';\nimport axios from 'axios';\nimport './InternCreate.css';\nimport { useState } from 'react';\nimport Select, { createFilter } from 'react-select';\nimport Loader from '../Loader/Loader';\nimport delay from '../../utils/delay';\nimport refreshPage from '../../utils/refreshPage';\nimport colleges from '../../data/colleges.json';\nimport startDates from '../../data/startDates.json';\nimport divisions from '../../data/divisions.json';\n\nexport default function InternCreate({\n  userInfo, loading, setLoading,\n}) {\n  // **********************************************************************\n  // CONSTANTS\n  // **********************************************************************\n\n  const collegeOptions = colleges.map((college) => ({\n    value: college, label: college,\n  }));\n\n  const startDateOptions = startDates.map((date) => ({\n    value: date, label: date,\n  }));\n\n  const divisionOptions = divisions.map((division) => ({\n    value: division, label: division,\n  }));\n\n  // **********************************************************************\n  // STATE VARIABLES AND FUNCTIONS\n  // **********************************************************************\n\n  const [startDate, setStartDate] = useState('');\n  const [division, setDivision] = useState('');\n  const [residence, setResidence] = useState('');\n  const [college, setCollege] = useState('');\n  const [bio, setBio] = useState('');\n  const [error, setError] = useState('');\n\n  // **********************************************************************\n  // AXIOS FUNCTIONS (POST)\n  // **********************************************************************\n\n  /*\n    Posts data to backend /api/intern endpoint using axios.\n    loading is true while this function runs and false otherwise.\n      (loading -> false is handled by page refresh in client function)\n    Adds intern info (unixname, start date, division, residence, college, bio) to database.\n    If an error occurs, the error is logged.\n  */\n  async function postNewIntern() {\n    setLoading(true);\n    try {\n      const url = 'api/intern'\n      + `?unixname=${userInfo.unixname}`\n      + `&startDate=${startDate}`\n      + `&division=${division}`\n      + `&residence=${residence}`\n      + `&college=${college}`\n      + `&bio=${bio}`;\n      await axios.post(url);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  // **********************************************************************\n  // HANDLER FUNCTIONS\n  // **********************************************************************\n\n  const handleOnInternInfoSubmit = async () => {\n    if (startDate === '') {\n      setError('Please enter your start date.');\n    } else if (division === '') {\n      setError('Please select your MetaU division.');\n    } else if (college === '') {\n      setError('Please select your college.');\n    } else {\n      setError('');\n      await postNewIntern();\n      await delay(3000); // artificial delay for occasional database latency\n      refreshPage();\n    }\n  };\n\n  // **********************************************************************\n  // PAGE RENDERING\n  // **********************************************************************\n\n  // loading\n  if (loading) {\n    return <Loader />;\n  }\n  // else if not loading, return intern account creation form\n  return (\n    <div className=\"InternCreate\">\n      <h1>Create your intern account!</h1>\n      <label htmlFor=\"startDate\">\n        {'Start Date: '}\n        <br />\n        <Select\n          name=\"startDate\"\n          className=\"input-field dropdown ic\"\n          options={startDateOptions}\n          filterOption={createFilter({ ignoreAccents: false })}\n          onChange={(e) => setStartDate(e.value)}\n        />\n      </label>\n      <br />\n      <label htmlFor=\"division\">\n        {'Division: '}\n        <br />\n        <Select\n          name=\"division\"\n          className=\"input-field dropdown ic\"\n          options={divisionOptions}\n          filterOption={createFilter({ ignoreAccents: false })}\n          onChange={(e) => setDivision(e.value)}\n        />\n      </label>\n      <br />\n      <label htmlFor=\"residence\">\n        {'Residence: '}\n        <br />\n        <input\n          type=\"text\"\n          id=\"residence\"\n          className=\"input-field text ic\"\n          name=\"residence\"\n          onChange={(e) => setResidence(e.target.value)}\n        />\n      </label>\n      <br />\n      <label htmlFor=\"college\">\n        {'College: '}\n        <br />\n        <Select\n          name=\"colleges\"\n          className=\"input-field dropdown ic\"\n          options={collegeOptions}\n          filterOption={createFilter({ ignoreAccents: false })}\n          onChange={(e) => setCollege(e.value)}\n        />\n      </label>\n      <br />\n      <label htmlFor=\"bio\">\n        {'Bio: '}\n        <br />\n        <textarea\n          id=\"bio\"\n          className=\"input-field text ic\"\n          placeholder=\"Tell us about yourself! (You may edit this later.)\"\n          name=\"bio\"\n          onChange={(e) => setBio(e.target.value)}\n        />\n      </label>\n      <br />\n      <input\n        className=\"action-button ic\"\n        type=\"submit\"\n        value=\"Submit\"\n        onClick={handleOnInternInfoSubmit}\n      />\n      <h3>{error}</h3>\n    </div>\n  );\n}\n"],"mappings":"qaAAA,MAAO,GAAKA,MAAZ,KAAuB,OAAvB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAO,oBAAP,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,OAAP,EAAiBC,YAAjB,KAAqC,cAArC,CACA,MAAOC,OAAP,KAAmB,kBAAnB,CACA,MAAOC,MAAP,KAAkB,mBAAlB,CACA,MAAOC,YAAP,KAAwB,yBAAxB,CACA,MAAOC,SAAP,KAAqB,0BAArB,CACA,MAAOC,WAAP,KAAuB,4BAAvB,CACA,MAAOC,UAAP,KAAsB,2BAAtB,C,wFAEA,cAAe,SAASC,aAAT,MAEZ,IADDC,SACC,MADDA,QACC,CADSC,OACT,MADSA,OACT,CADkBC,UAClB,MADkBA,UAClB,CACD;AACA;AACA;AAEA,GAAMC,eAAc,CAAGP,QAAQ,CAACQ,GAAT,CAAa,SAACC,OAAD,QAAc,CAChDC,KAAK,CAAED,OADyC,CAChCE,KAAK,CAAEF,OADyB,CAAd,EAAb,CAAvB,CAIA,GAAMG,iBAAgB,CAAGX,UAAU,CAACO,GAAX,CAAe,SAACK,IAAD,QAAW,CACjDH,KAAK,CAAEG,IAD0C,CACpCF,KAAK,CAAEE,IAD6B,CAAX,EAAf,CAAzB,CAIA,GAAMC,gBAAe,CAAGZ,SAAS,CAACM,GAAV,CAAc,SAACO,QAAD,QAAe,CACnDL,KAAK,CAAEK,QAD4C,CAClCJ,KAAK,CAAEI,QAD2B,CAAf,EAAd,CAAxB,CAIA;AACA;AACA;AAEA,cAAkCrB,QAAQ,CAAC,EAAD,CAA1C,wCAAOsB,SAAP,eAAkBC,YAAlB,eACA,eAAgCvB,QAAQ,CAAC,EAAD,CAAxC,yCAAOqB,QAAP,eAAiBG,WAAjB,eACA,eAAkCxB,QAAQ,CAAC,EAAD,CAA1C,yCAAOyB,SAAP,eAAkBC,YAAlB,eACA,eAA8B1B,QAAQ,CAAC,EAAD,CAAtC,yCAAOe,OAAP,eAAgBY,UAAhB,eACA,eAAsB3B,QAAQ,CAAC,EAAD,CAA9B,0CAAO4B,GAAP,gBAAYC,MAAZ,gBACA,gBAA0B7B,QAAQ,CAAC,EAAD,CAAlC,2CAAO8B,KAAP,gBAAcC,QAAd,gBAEA;AACA;AACA;AAEA;AACF;AACA;AACA;AACA;AACA;AACA,IAtCG,QAuCcC,cAvCd,gDAuDD;AACA;AACA;AAzDC,mGAuCD,kJACEpB,UAAU,CAAC,IAAD,CAAV,CADF,iBAGUqB,GAHV,CAGgB,iCACGvB,QAAQ,CAACwB,QADZ,uBAEIZ,SAFJ,sBAGGD,QAHH,uBAIII,SAJJ,qBAKEV,OALF,iBAMFa,GANE,CAHhB,wBAUU7B,MAAK,CAACoC,IAAN,CAAWF,GAAX,CAVV,2FAYIG,OAAO,CAACN,KAAR,eAZJ,sEAvCC,gDA2DD,GAAMO,yBAAwB,6FAAG,0IAC3Bf,SAAS,GAAK,EADa,0BAE7BS,QAAQ,CAAC,+BAAD,CAAR,CAF6B,mCAGpBV,QAAQ,GAAK,EAHO,0BAI7BU,QAAQ,CAAC,oCAAD,CAAR,CAJ6B,mCAKpBhB,OAAO,GAAK,EALQ,2BAM7BgB,QAAQ,CAAC,6BAAD,CAAR,CAN6B,+BAQ7BA,QAAQ,CAAC,EAAD,CAAR,CAR6B,uBASvBC,cAAa,EATU,gCAUvB5B,MAAK,CAAC,IAAD,CAVkB,SAUV;AACnBC,WAAW,GAXkB,uDAAH,kBAAxBgC,yBAAwB,2CAA9B,CAeA;AACA;AACA;AAEA;AACA,GAAI1B,OAAJ,CAAa,CACX,mBAAO,KAAC,MAAD,IAAP,CACD,CACD;AACA,mBACE,aAAK,SAAS,CAAC,cAAf,wBACE,mDADF,cAEE,eAAO,OAAO,CAAC,WAAf,WACG,cADH,cAEE,aAFF,cAGE,KAAC,MAAD,EACE,IAAI,CAAC,WADP,CAEE,SAAS,CAAC,yBAFZ,CAGE,OAAO,CAAEO,gBAHX,CAIE,YAAY,CAAEhB,YAAY,CAAC,CAAEoC,aAAa,CAAE,KAAjB,CAAD,CAJ5B,CAKE,QAAQ,CAAE,kBAACC,CAAD,QAAOhB,aAAY,CAACgB,CAAC,CAACvB,KAAH,CAAnB,EALZ,EAHF,GAFF,cAaE,aAbF,cAcE,eAAO,OAAO,CAAC,UAAf,WACG,YADH,cAEE,aAFF,cAGE,KAAC,MAAD,EACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,yBAFZ,CAGE,OAAO,CAAEI,eAHX,CAIE,YAAY,CAAElB,YAAY,CAAC,CAAEoC,aAAa,CAAE,KAAjB,CAAD,CAJ5B,CAKE,QAAQ,CAAE,kBAACC,CAAD,QAAOf,YAAW,CAACe,CAAC,CAACvB,KAAH,CAAlB,EALZ,EAHF,GAdF,cAyBE,aAzBF,cA0BE,eAAO,OAAO,CAAC,WAAf,WACG,aADH,cAEE,aAFF,cAGE,cACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,WAFL,CAGE,SAAS,CAAC,qBAHZ,CAIE,IAAI,CAAC,WAJP,CAKE,QAAQ,CAAE,kBAACuB,CAAD,QAAOb,aAAY,CAACa,CAAC,CAACC,MAAF,CAASxB,KAAV,CAAnB,EALZ,EAHF,GA1BF,cAqCE,aArCF,cAsCE,eAAO,OAAO,CAAC,SAAf,WACG,WADH,cAEE,aAFF,cAGE,KAAC,MAAD,EACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,yBAFZ,CAGE,OAAO,CAAEH,cAHX,CAIE,YAAY,CAAEX,YAAY,CAAC,CAAEoC,aAAa,CAAE,KAAjB,CAAD,CAJ5B,CAKE,QAAQ,CAAE,kBAACC,CAAD,QAAOZ,WAAU,CAACY,CAAC,CAACvB,KAAH,CAAjB,EALZ,EAHF,GAtCF,cAiDE,aAjDF,cAkDE,eAAO,OAAO,CAAC,KAAf,WACG,OADH,cAEE,aAFF,cAGE,iBACE,EAAE,CAAC,KADL,CAEE,SAAS,CAAC,qBAFZ,CAGE,WAAW,CAAC,oDAHd,CAIE,IAAI,CAAC,KAJP,CAKE,QAAQ,CAAE,kBAACuB,CAAD,QAAOV,OAAM,CAACU,CAAC,CAACC,MAAF,CAASxB,KAAV,CAAb,EALZ,EAHF,GAlDF,cA6DE,aA7DF,cA8DE,cACE,SAAS,CAAC,kBADZ,CAEE,IAAI,CAAC,QAFP,CAGE,KAAK,CAAC,QAHR,CAIE,OAAO,CAAEqB,wBAJX,EA9DF,cAoEE,oBAAKP,KAAL,EApEF,GADF,CAwED"},"metadata":{},"sourceType":"module"}